@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (User.Identity.IsAuthenticated && (User.IsInRole("Controls") || User.IsInRole("Accounts")))
{
    <div class="create-campaign-container">
        <div class="form-container">
            <h2 class="form-heading">Create New Campaign</h2>

            @using (Html.BeginForm("Create", "Campaign", FormMethod.Post, new { id = "createCampaignForm", @class = "form-horizontal", role = "form" }))
            {
                @Html.AntiForgeryToken()

                <div class="form-group">
                    @Html.TextBox("CampaignName", null, new
                    {
                        @class = "form-control",
                        placeholder = "Enter Campaign Name",
                        required = "required",
                        maxlength = "250"
                    })
                </div>

                <div class="form-group">
                    <select id="supplierSelect" name="SupplierId" class="form-select dropdown-arrow" required title="Please Select the Supplier"></select>
                </div>

                <div class="form-group">
                    <select id="productSelect" name="ProductId" class="form-select dropdown-arrow" title="Please Select the Product">
                        <option value="">Select Product</option>
                    </select>
                </div>


                <div class="form-group">
                    @Html.TextBox("StartDate", null, "{0:yyyy-MM-dd}", new
                    {
                        @class = "form-control",
                        type = "date",
                        required = "required"
                    })
                </div>

                <div class="form-group">
                    @Html.TextBox("EndDate", null, "{0:yyyy-MM-dd}", new
                    {
                        @class = "form-control",
                        type = "date",
                        required = "required"
                    })
                </div>

                <div class="form-group">
                    @Html.TextBox("SaleTarget", null, new
                    {
                        @class = "form-control",
                        placeholder = "Enter Sale Target £ (1-1000)",
                        required = "required",
                        maxlength = "250"
                    })
                </div>

                <div class="form-group">
                    @Html.TextBox("Bonus", null, new
                    {
                        @class = "form-control",
                        placeholder = "Enter Bonus £ (1-10000)",
                        required = "required",
                        maxlength = "250"
                    })
                </div>

                <button type="submit" class="btn btn-primary mt-2">Create Campaign</button>
            }
        </div>
    </div>

    @section scripts {
        @if (TempData["ToastMessage"] != null)
        {
            <script>
                $(function () {
                    const message = "@TempData["ToastMessage"]";
                    const type = "@TempData["ToastType"]";
                    if (type === "success") {
                        showToastSuccess(message);
                    } else if (type === "error") {
                        showToastError(message);
                    }
                });
            </script>
        }

        <script src="~/Scripts/Dropdown/dropdowns.js"></script>
        <script src="~/Scripts/Accounts/CampaignDashboard/campaignCreation.js"></script>
    }

    @section styles {
        <link href="~/Content/Accounts/CampaignDashboard/campaignCreate.css" rel="stylesheet" />
    }
}
else
{
    <div class="alert alert-danger text-center mt-5">
        <h4>Access Denied</h4>
        <p>You are not authorized to view this page.</p>
    </div>
}
